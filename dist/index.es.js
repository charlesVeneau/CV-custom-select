import e,{useState as t,useEffect as o,useRef as l,useMemo as n}from"react";!function(e,t){void 0===t&&(t={});var o=t.insertAt;if(e&&"undefined"!=typeof document){var l=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===o&&l.firstChild?l.insertBefore(n,l.firstChild):l.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}(".relativeBlock,.selectCustom,.selectCustom-trigger,.selectNative{height:100%;position:relative;width:100%}.selectLabel{display:block;text-transform:capitalize}.selectCustom{display:none;left:0;position:absolute;top:0;z-index:20}.selectCustom-opts{list-style:none;margin-bottom:2rem;margin-top:.5rem;overflow-x:hidden;overflow-y:scroll;padding-left:0}.selectCustom-opts.isVisible{display:block}.selectCustom-opts.isHidden{display:none}.selectCustom-opt{cursor:pointer;padding:4px 0 4px 5px}.isActive{background-color:#2d86b6;color:#fff}@media (hover:hover){.selectNative:focus+.selectCustom{display:none}.selectCustom{display:block}}");const a=({handleChange:a,data:s,name:r})=>{let[c,i]=t(!1),[d,u]=t(!1),[m,p]=t(!1),[v,b]=t(""),[f,y]=t(0),[g,k]=t("");const h=l(null),C=function(e,l){const[n,a]=t(e);return o((()=>{const t=setTimeout((()=>{a(e)}),l);return()=>{clearTimeout(t)}}),[e,l]),n}(g,500);console.log("debounceSearch"+C);const E=s.sort((function(e,t){return e.label<t.label?-1:e.label>t.label?1:0}));function N(e,t){let o="";"click"===t?o="LI"===e.target.nodeName?e.target.getAttribute("data-value"):e.target.value:"enter"===t&&(o="LI"===e.nodeName?e.getAttribute("data-value"):"NULL"),"NULL"===o?(i(!1),p(!0),b(null),a(null,w(r))):(i(!0),p(!1),b(o),a(o,w(r))),u(!1),document.removeEventListener("keydown",x),document.removeEventListener("mousedown",x)}function w(e){return"state"===e?"stateAbbrev":e}function L(e){"down"===e&&f<E.length&&y((()=>f++)),"up"===e&&f>0&&y((()=>f--))}function A(e){e?(document.addEventListener("keydown",x),document.addEventListener("mouseup",x)):(document.removeEventListener("keydown",x),document.removeEventListener("mouseup",x))}function x(e){e.preventDefault(),"Escape"===e.key?V():"ArrowDown"===e.key?(L("down"),I().scrollIntoView({block:"center"})):"ArrowUp"===e.key?(L("up"),I().scrollIntoView({block:"center"})):"Enter"===e.key?f>=0&&N(I(),"enter"):"mouseup"===e.type?e.target.parentNode.getAttribute("aria-hidden")&&"true"!==e.target.parentNode.getAttribute("aria-hidden")||V():/^[a-zA-Zàâçéèêëîïôûùüÿñæœ]{1,}$/.test(e.key)&&k(g+=e.key)}function I(){return h.current.querySelector("li.isActive")}function V(){u((()=>!1)),y((()=>0)),A(!1)}return n((()=>{C&&function(){const e=E.findIndex((e=>e.label.toLowerCase().includes(C.toLowerCase())));console.log(e),y(e),e>=0&&document.querySelector(`li[data-active="${e}"]`).scrollIntoView({block:"center"})}()}),[C,E]),e.createElement("div",{className:"relativeBlock"},e.createElement("label",{htmlFor:r,className:"selectLabel"},r),e.createElement("div",{className:"relativeBlock"},e.createElement("select",{id:r,"aria-labelledby":r,className:"selectNative js-selectNative select "+(c?"isValid":m?"hasError":"neutral"),onChange:e=>N(e,"click"),value:v},E.map((t=>e.createElement("option",{key:t.abbrev,value:t.abbrev},t.label)))),e.createElement("div",{className:"selectCustom","aria-hidden":d?"false":"true"},e.createElement("div",{className:"selectCustom-trigger",onClick:function(e){const t=!d;u(!d),A(t)}}),e.createElement("ul",{ref:h,className:"selectCustom-opts "+(d?"isVisible":"isHidden")},E.map(((t,o)=>e.createElement("li",{key:o,"data-active":o,"data-value":t.abbrev,className:"selectCustom-opt "+(o===f?"isActive":""),onClick:e=>N(e,"click")},t.label)))))))};export{a as Select};
