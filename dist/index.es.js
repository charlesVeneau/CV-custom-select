import e,{useState as t,useEffect as l,useRef as o,useMemo as n}from"react";!function(e,t){void 0===t&&(t={});var l=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===l&&o.firstChild?o.insertBefore(n,o.firstChild):o.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}(".relativeBlock,.selectCustom,.selectCustom-trigger,.selectNative{height:100%;position:relative;width:100%}.selectLabel{display:block;text-transform:capitalize}.selectCustom{display:none;left:0;position:absolute;top:0;z-index:20}.selectCustom-opts{list-style:none;margin-bottom:2rem;margin-top:.5rem;overflow-x:hidden;overflow-y:scroll;padding-left:0}.selectCustom-opts.isVisible{display:block}.selectCustom-opts.isHidden{display:none}.selectCustom-opt{cursor:pointer;padding:4px 0 4px 5px}.isActive{background-color:#2d86b6;color:#fff}@media (hover:hover){.selectNative:focus+.selectCustom{display:none}.selectCustom{display:block}}");const a=({handleChange:a,data:s,name:r})=>{let[i,c]=t(!1),[d,u]=t(!1),[m,p]=t(!1),[v,b]=t(""),[f,y]=t(0),[k,g]=t("");const h=o(null),C=function(e,o){const[n,a]=t(e);return l((()=>{const t=setTimeout((()=>{a(e)}),o);return()=>{clearTimeout(t)}}),[e,o]),n}(k,500),E=s.sort((function(e,t){return e.label<t.label?-1:e.label>t.label?1:0}));function N(e,t){let l="";"click"===t?l="LI"===e.target.nodeName?e.target.getAttribute("data-value"):e.target.value:"enter"===t&&(l="LI"===e.nodeName?e.getAttribute("data-value"):"NULL"),"NULL"===l?(c(!1),p(!0),b(null),a(null,r)):(c(!0),p(!1),b(l),a(l,r)),u(!1),document.removeEventListener("keydown",x),document.removeEventListener("mousedown",x)}function w(e){"down"===e&&f<E.length&&y((()=>f++)),"up"===e&&f>0&&y((()=>f--))}function L(e){e?(document.addEventListener("keydown",x),document.addEventListener("mouseup",x)):(document.removeEventListener("keydown",x),document.removeEventListener("mouseup",x))}function x(e){e.preventDefault(),"Escape"===e.key?I():"ArrowDown"===e.key?(w("down"),A().scrollIntoView({block:"center"})):"ArrowUp"===e.key?(w("up"),A().scrollIntoView({block:"center"})):"Enter"===e.key?f>=0&&N(A(),"enter"):"mouseup"===e.type?e.target.parentNode.getAttribute("aria-hidden")&&"true"!==e.target.parentNode.getAttribute("aria-hidden")||I():/^[a-zA-Zàâçéèêëîïôûùüÿñæœ]{1,}$/.test(e.key)&&g(k+=e.key)}function A(){return h.current.querySelector("li.isActive")}function I(){u((()=>!1)),y((()=>0)),L(!1)}return n((()=>{C&&function(){const e=E.findIndex((e=>e.label.toLowerCase().includes(C.toLowerCase())));y(e),e>=0&&document.querySelector(`li[data-active="${e}"]`).scrollIntoView({block:"center"})}()}),[C,E]),e.createElement("div",{className:"relativeBlock"},e.createElement("label",{htmlFor:r,className:"selectLabel"},r),e.createElement("div",{className:"relativeBlock"},e.createElement("select",{id:r,"aria-labelledby":r,className:"selectNative js-selectNative select "+(i?"isValid":m?"hasError":"neutral"),onChange:e=>N(e,"click"),value:v},E.map((t=>e.createElement("option",{key:t.abbrev,value:t.abbrev},t.label)))),e.createElement("div",{className:"selectCustom","aria-hidden":d?"false":"true"},e.createElement("div",{className:"selectCustom-trigger",onClick:function(e){const t=!d;u(!d),L(t)}}),e.createElement("ul",{ref:h,className:"selectCustom-opts "+(d?"isVisible":"isHidden")},E.map(((t,l)=>e.createElement("li",{key:l,"data-active":l,"data-value":t.abbrev,className:"selectCustom-opt "+(l===f?"isActive":""),onClick:e=>N(e,"click")},t.label)))))))};export{a as Select};
