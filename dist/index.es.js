import e,{useState as t,useRef as l}from"react";!function(e,t){void 0===t&&(t={});var l=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===l&&o.firstChild?o.insertBefore(a,o.firstChild):o.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}(".relativeBlock,.selectCustom,.selectCustom-trigger,.selectNative{height:100%;position:relative;width:100%}.selectLabel{display:block;text-transform:capitalize}.selectCustom{display:none;left:0;position:absolute;top:0;z-index:20}.selectCustom-opts{list-style:none;margin-bottom:2rem;margin-top:.5rem;overflow-x:hidden;overflow-y:scroll;padding-left:0}.selectCustom-opts.isVisible{display:block}.selectCustom-opts.isHidden{display:none}.selectCustom-opt{cursor:pointer;padding:4px 0 4px 5px}.isActive{background-color:#2d86b6;color:#fff}@media (hover:hover){.selectNative:focus+.selectCustom{display:none}.selectCustom{display:block}}");const o=({handleChange:o,data:a,name:n})=>{let[s,i]=t(!1),[r,c]=t(!1),[d,u]=t(""),[m,p]=t(0);const v=l(null),f=a.sort((function(e,t){return e.label<t.label?-1:e.label>t.label?1:0}));function b(e,t){let l="";"click"===t?l="LI"===e.target.nodeName?e.target.getAttribute("data-value"):e.target.value:"enter"===t&&(l="LI"===e.nodeName?e.getAttribute("data-value"):"NULL"),"NULL"===l?(c(!0),u(null),o(null,n)):(c(!1),u(l),o(l,n)),i(!1),document.removeEventListener("keydown",g),document.removeEventListener("mousedown",g)}function y(e){"down"===e&&m<f.length&&p((()=>m++)),"up"===e&&m>0&&p((()=>m--))}function k(e){e?(document.addEventListener("keydown",g),document.addEventListener("mouseup",g)):(document.removeEventListener("keydown",g),document.removeEventListener("mouseup",g))}function g(e){if(e.preventDefault(),"Escape"===e.key)C();else if("ArrowDown"===e.key)y("down"),h().scrollIntoView({block:"center"});else if("ArrowUp"===e.key)y("up"),h().scrollIntoView({block:"center"});else if("Enter"===e.key)m>=0&&b(h(),"enter");else if("mouseup"===e.type)e.target.parentNode.getAttribute("aria-hidden")&&"true"!==e.target.parentNode.getAttribute("aria-hidden")||C();else if(/^[a-zA-Zàâçéèêëîïôûùüÿñæœ]{1,}$/.test(e.key)){const t=a.map((e=>e.label.toLowerCase()[0])).indexOf(e.key.toLowerCase());t>=0&&(p((()=>t)),document.querySelector(`li[data-active="${t}"]`).scrollIntoView({block:"center"}))}}function h(){return v.current.querySelector("li.isActive")}function C(){i((()=>!1)),p((()=>0)),k(!1)}return e.createElement("div",{className:"relativeBlock"},e.createElement("label",{htmlFor:n,className:"selectLabel"},n),e.createElement("div",{className:"relativeBlock"},e.createElement("select",{id:n,"aria-labelledby":n,className:"selectNative js-selectNative select "+(r?"hasError":"neutral"),onChange:e=>b(e,"click"),value:d},f.map((t=>e.createElement("option",{key:t.abbrev,value:t.abbrev},t.label)))),e.createElement("div",{className:"selectCustom","aria-hidden":s?"false":"true"},e.createElement("div",{className:"selectCustom-trigger",onClick:function(e){const t=!s;i(!s),k(t)}}),e.createElement("ul",{ref:v,className:"selectCustom-opts "+(s?"isVisible":"isHidden")},f.map(((t,l)=>e.createElement("li",{key:l,"data-active":l,"data-value":t.abbrev,className:"selectCustom-opt "+(l===m?"isActive":""),onClick:e=>b(e,"click")},t.label)))))))};export{o as Select};
