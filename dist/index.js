"use strict";var e=require("react");!function(e,t){void 0===t&&(t={});var l=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===l&&o.firstChild?o.insertBefore(n,o.firstChild):o.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}(".relativeBlock,.selectCustom,.selectCustom-trigger,.selectNative{height:100%;position:relative;width:100%}.selectLabel{display:block;text-transform:capitalize}.selectCustom{display:none;left:0;position:absolute;top:0;z-index:20}.selectCustom-opts{list-style:none;margin-bottom:2rem;margin-top:.5rem;overflow-x:hidden;overflow-y:scroll;padding-left:0}.selectCustom-opts.isVisible{display:block}.selectCustom-opts.isHidden{display:none}.selectCustom-opt{cursor:pointer;padding:4px 0 4px 5px}.isActive{background-color:#2d86b6;color:#fff}@media (hover:hover){.selectNative:focus+.selectCustom{display:none}.selectCustom{display:block}}");exports.Select=({handleChange:t,data:l,name:o})=>{let[n,a]=e.useState(!1),[s,r]=e.useState(!1),[c,i]=e.useState(!1),[u,d]=e.useState(""),[m,v]=e.useState(0),[p,b]=e.useState("");const f=e.useRef(null),y=function(t,l){const[o,n]=e.useState(t);return e.useEffect((()=>{const e=setTimeout((()=>{n(t)}),l);return()=>{clearTimeout(e)}}),[t,l]),o}(p,500);console.log("debounceSearch"+y);const g=l.sort((function(e,t){return e.label<t.label?-1:e.label>t.label?1:0}));function k(e,l){let n="";"click"===l?n="LI"===e.target.nodeName?e.target.getAttribute("data-value"):e.target.value:"enter"===l&&(n="LI"===e.nodeName?e.getAttribute("data-value"):"NULL"),"NULL"===n?(a(!1),i(!0),d(null),t(null,h(o))):(a(!0),i(!1),d(n),t(n,h(o))),r(!1),document.removeEventListener("keydown",N),document.removeEventListener("mousedown",N)}function h(e){return"state"===e?"stateAbbrev":e}function C(e){"down"===e&&m<g.length&&v((()=>m++)),"up"===e&&m>0&&v((()=>m--))}function E(e){e?(document.addEventListener("keydown",N),document.addEventListener("mouseup",N)):(document.removeEventListener("keydown",N),document.removeEventListener("mouseup",N))}function N(e){e.preventDefault(),"Escape"===e.key?L():"ArrowDown"===e.key?(C("down"),w().scrollIntoView({block:"center"})):"ArrowUp"===e.key?(C("up"),w().scrollIntoView({block:"center"})):"Enter"===e.key?m>=0&&k(w(),"enter"):"mouseup"===e.type?e.target.parentNode.getAttribute("aria-hidden")&&"true"!==e.target.parentNode.getAttribute("aria-hidden")||L():/^[a-zA-Zàâçéèêëîïôûùüÿñæœ]{1,}$/.test(e.key)&&b(p+=e.key)}function w(){return f.current.querySelector("li.isActive")}function L(){r((()=>!1)),v((()=>0)),E(!1)}return e.useMemo((()=>{y&&function(){const e=g.findIndex((e=>e.label.toLowerCase().includes(y.toLowerCase())));console.log(e),v(e),e>=0&&document.querySelector(`li[data-active="${e}"]`).scrollIntoView({block:"center"})}()}),[y,g]),e.createElement("div",{className:"relativeBlock"},e.createElement("label",{htmlFor:o,className:"selectLabel"},o),e.createElement("div",{className:"relativeBlock"},e.createElement("select",{id:o,"aria-labelledby":o,className:"selectNative js-selectNative select "+(n?"isValid":c?"hasError":"neutral"),onChange:e=>k(e,"click"),value:u},g.map((t=>e.createElement("option",{key:t.abbrev,value:t.abbrev},t.label)))),e.createElement("div",{className:"selectCustom","aria-hidden":s?"false":"true"},e.createElement("div",{className:"selectCustom-trigger",onClick:function(e){const t=!s;r(!s),E(t)}}),e.createElement("ul",{ref:f,className:"selectCustom-opts "+(s?"isVisible":"isHidden")},g.map(((t,l)=>e.createElement("li",{key:l,"data-active":l,"data-value":t.abbrev,className:"selectCustom-opt "+(l===m?"isActive":""),onClick:e=>k(e,"click")},t.label)))))))};
